
Aldabba_1_slot = {
	slot = 1
	generic = no
	ai = yes
	potential = {tag = AF2}
	has_country_shield = yes

	ald_list = {
		icon = mission_apostolic_kingdom
		required_missions = { }
		position = 1
		
		trigger = { 
			treasury = 50
			NOT = {
				num_of_loans = 1
			}
		}
		
		effect = {
			add_treasury = -50
			custom_tooltip = " "
			add_country_modifier = {
				name = make_it_work
				duration = 10950
			}
			add_adm_power = 50
		}
	}
	ald_fix_it = {
		icon = mission_conquer_algiers
		required_missions = { ald_list}
		position = 2
		provinces_to_highlight = {
			province_id = 336
			NOT = {
				base_tax = 7
			}
			NOT = {
				development = 25
			}
		}
		trigger = { 
			336 = {
				base_tax = 7
				development = 25
			}
			NOT = {
				corruption = 1
			}
		}
		
		effect = {
			define_advisor = {
				type = natural_scientist
				skill = 2
				discount = yes
				culture = spaniard
				religion = jewish
			}
			custom_tooltip =  " "
			algiers_area = {
				add_random_development = 1
			}
			custom_tooltip = " "
			custom_tooltip = on_development_aldabban_restoration
			hidden_effect = {
				set_country_flag = aldabban_restoration_dev_flag
			}
		}
	}
	ald_good_advice = {
		icon = mission_indian_stateman
		required_missions = { ald_fix_it ald_better_balance }
		position = 3
		
		trigger = { 
			has_government_power = {
				mechanic_type = aldabba_failure_mechanic
				power_type = restoration_aldabba
				value = 25
			}
			stability = 1

		}
		effect = {
			336 = {
				add_great_project_tier = {
					type = aldabba_palace
					tier = 1
				}
			}
			custom_tooltip = " "
			custom_tooltip = enable_purge_estates_button
			set_country_flag = enable_purge_estates_button_flag
		}
	}
	ald_friends = {
		icon = mam_yemen
		required_missions = { ald_good_advice}
		position = 4
		provinces_to_highlight = {
			NOT = {
				has_tax_building_trigger = yes
			}
			country_or_non_sovereign_subject_holds = ROOT
		}
		trigger = { 
			num_of_owned_provinces_with = {
				has_tax_building_trigger = yes
				value = 10
			}
			336 = {
				base_tax = 9
				has_building = temple
			}
		}
		
		effect = {
			336 = {
				remove_building = temple
				add_building = cathedral
			}
			custom_tooltip = " "
			custom_tooltip = every_church_provinces_ALD
			hidden_effect = {
				set_country_flag = build_churches_flag_ALD
				every_owned_province = {
					limit = {
						has_tax_building_trigger = yes
					}
					add_base_tax = 1
				}
			}
			
		}
	}
	ald_africa = {
		icon = mission_restore_faith_in_the_throne
		required_missions = {ald_friends  }
		position = 6
		provinces_to_highlight = {
			region = maghreb_region
			owned_by = ROOT
		}
		trigger = { 
			tag = AF0
			has_reform = aldabban_restored_reform
			at_war_with_religious_enemy = yes 
		}
		
		effect = {
			set_government_rank = 3
			add_ruler_modifier = {
				name = ald_first_king_of_africa
				duration = -1
			}
			custom_tooltip = gain_core_on_all_holy_sites
			hidden_effect = {
				every_province = {
					limit = {
						OR = {
							province_id = 343
							province_id = 336
							province_id = 341
							province_id = 358
							province_id = 379
						}
					}
					add_core = ROOT
				}
			}
		}
	}
}

Aldabba_2_slot = {
	slot = 2
	generic = no
	ai = yes
	potential = {tag = AF2}
	has_country_shield = yes

	ald_better_balance = {
		icon = mission_fekete_sereg
		required_missions = { ald_list}
		position = 2
		
		trigger = { 
			num_of_battles = { amount = 15 }
			NOT = {
				has_regency = yes
			}
		}
		
		effect = {
			if = {
				limit = {
					has_ruler_flag = is_lucius_galeni
				}
				custom_tooltip = has_lucius_tooltip_yes
				tooltip = {
					change_mil = 1	
					add_ruler_personality = aldabban_king
				}
			}
			else = {
				custom_tooltip = has_lucius_tooltip_no
				tooltip = {
					change_mil = 1	
					add_ruler_personality = aldabban_king
				}
			}
			custom_tooltip = " "
			add_yearly_manpower = 2
			custom_tooltip = " "
			custom_tooltip = winning_battles_tt
			hidden_effect = {
				if = {
					limit = {
						has_ruler_flag = is_lucius_galeni
					}
					set_country_flag = aldabban_king_flag
					change_mil = 1	
					add_ruler_personality = aldabban_king
				}
			}
		}
	}
	ald_gold_book = {
		icon = ven_navy_mission_2
		required_missions = { ald_better_balance}
		position = 3
		provinces_to_highlight = {
			province_id = 346
		}
		trigger = { 
			num_of_battles = { amount = 50 }
			innovativeness = 25
			OR = {
				full_idea_group = quality_ideas
				has_global_modifier_value = {
					which = discipline
					value = 0.20
				}
			}
		}
		
		effect = {
			add_mil_tech = 1
			custom_tooltip = " "
			custom_tooltip = taking_mil_tech_improvement
			set_country_flag = taking_mil_tech_ald
		}
	}
	ald_atlantic = {
		icon = mission_plus_ultra
		required_missions = {ald_new_grudge }
		position = 4
		provinces_to_highlight = {
			OR = {
				area = lower_andalucia_area
			}
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = { 
			lower_andalucia_area = {
				type = all
				owned_by = ROOT
			}
		}
		
		effect = {
			1293 = {
				add_trade_modifier = {
					who = ROOT
					duration = 10950
					power = 35
					key = ALD_HERC
				}
			}
			custom_tooltip = " "
			alentejo_area = {
				add_permanent_claim = ROOT
			}
			extremadura_area = {
				add_permanent_claim = ROOT
			}
			beieras_area = {
				add_permanent_claim = ROOT
			}
		}
	}
	ald_iberia = {
		icon = mission_reclaim_andalucia
		required_missions = { ald_atlantic ald_hispania }
		position = 6
		provinces_to_highlight = {
			OR = {
				area = upper_andalucia_area
				area = lower_andalucia_area
				area = toledo_area
				area = valencia_area
				area = baleares_area
				area = alentejo_area
				area = extremadura_area
				area = beieras_area
			}
			NOT = {
				owned_by = ROOT
			}
		}
		trigger = { 
			num_of_provinces_owned_or_owned_by_subjects_with = {
				value = 25
				OR = {
					area = upper_andalucia_area
					area = lower_andalucia_area
					area = toledo_area
					area = valencia_area
					area = baleares_area
					area = alentejo_area
					area = extremadura_area
					area = beieras_area
				}
			}
		}
		
		effect = {
			iberia_region = {
				add_permanent_claim = ROOT
			}
			custom_tooltip = " "
			add_country_modifier = {
				name = ald_spanish_jewel
				duration = 10950
			}
			country_event = {
				id = aldab.5
			}
		}
	}
	ald_more = {
		icon = mission_unite_home_region
		required_missions = {ald_iberia }
		position = 7
		provinces_to_highlight = {
			region = iberia_region
			NOT = {
				owned_by = ROOT
			}
		}
		trigger = { 
			iberia_region = {
				type = all
				owned_by = ROOT
			}
		}
		
		effect = {
			languedoc_area = {
				add_permanent_claim = ROOT
			}
			pyrenees_area = {
				add_permanent_claim = ROOT
			}
			guyenne_area = {
				add_permanent_claim = ROOT
			}
			add_country_modifier = {
				name = ald_iberian_united
				duration = 5475
			}
			if = {
				limit = {
					NOT = {
						had_country_flag = {
							flag = must_convert_30_provinces_in_30_years
							days = 10950
						}
					}
					has_country_flag = must_convert_30_provinces_in_30_years
					num_of_provinces_owned_or_owned_by_subjects_with = {
						region = iberia_region
						religion = ROOT
						value = 30
					}
				}
				custom_tooltip = if_chosen_to_convert_and_not_been_30_years_yes
			}
			else_if = {
				limit = {
					OR = {
						had_country_flag = {
							flag = must_convert_30_provinces_in_30_years
							days = 10950
						}
						NOT = {
							has_country_flag = must_convert_30_provinces_in_30_years
						}
						NOT = {
							num_of_provinces_owned_or_owned_by_subjects_with = {
								region = iberia_region
								religion = ROOT
								value = 30
							}
						}
					}
				}
				custom_tooltip = if_chosen_to_convert_and_not_been_30_years_no
			}
			tooltip = {
				custom_tooltip = " "
				custom_tooltip = brotherhood_of_cross_gains_development
				add_country_modifier = {
					name = alb_crusade_successful
					duration = -1
				}
			}
			if = {
				limit = {
					NOT = {
						had_country_flag = {
							flag = must_conquer_iberia_in_30_years
							days = 10950
						}
					}
					has_country_flag = must_conquer_iberia_in_30_years
				}
				custom_tooltip = if_chosen_to_conquer_and_not_been_30_years_yes
			}
			else_if = {
				limit = {
					OR = {
						had_country_flag = {
							flag = must_conquer_iberia_in_30_years
							days = 10950
						}
						NOT = {
							has_country_flag = must_conquer_iberia_in_30_years
						}
					}
				}
				custom_tooltip = if_chosen_to_conquer_and_not_been_30_years_no
			}
			tooltip = {
				custom_tooltip = " "
				custom_tooltip = inquisitorial_gains_development
				add_country_modifier = {
					name = alb_conquest_successful
					duration = -1
				}
			}
			hidden_effect = {
				if = {
					limit = {
						NOT = {
							had_country_flag = {
								flag = must_convert_30_provinces_in_30_years
								days = 10950
							}
						}
						has_country_flag = must_convert_30_provinces_in_30_years
						num_of_provinces_owned_or_owned_by_subjects_with = {
							region = iberia_region
							religion = ROOT
							value = 30
						}
					}
					add_country_modifier = {
						name = alb_crusade_successful
						duration = -1
					}
					set_country_flag = alb_crusade_successful_flag
					every_province = {
						limit = {
							holy_order = ind_1_order
							country_or_non_sovereign_subject_holds = ROOT
						}
						add_base_tax = 1
					}
				}
				else_if = {
					limit = {
						NOT = {
							had_country_flag = {
								flag = must_conquer_iberia_in_30_years
								days = 10950
							}
						}
						has_country_flag = must_conquer_iberia_in_30_years
					}
					add_country_modifier = {
						name = alb_conquest_successful
						duration = -1
					}
					set_country_flag = alb_campaign_successful_flag
					every_province = {
						limit = {
							holy_order = ind_3_order
							country_or_non_sovereign_subject_holds = ROOT
						}
						add_base_manpower = 1
					}
				}
			}
		}
	}
	ald_roman_culture_west = {
		icon = a_roman_empire
		required_missions = { ald_empire_roman}
		position = 12
		
		trigger = { 
			france_region = {
				type = all
				NOT = {
					unrest = 1
				}
			}
			iberia_region = {
				type = all
				NOT = {
					unrest = 1
				}
			}
		}
		
		effect = {
			every_owned_province = {
				limit = {
					region = france_region
				}
				change_culture = roman
			}
			every_owned_province = {
				limit = {
					region = iberia_region
				}
				change_culture = roman
			}
		}
	}
}
Aldabba_3_slot = {
	slot = 3
	generic = no
	ai = yes
	potential = {tag = AF2}
	has_country_shield = yes


	ald_rival = {
		icon = mission_conquer_mauria
		required_missions = { }
		position = 1
		
		trigger = { 
			AF1 = {
				OR = {
					AND = {
						custom_trigger_tooltip = {
							tooltip = has_been_insulted_by_root
							OR = {
								has_opinion_modifier = {
									who = ROOT
									modifier = insulted
								}
								has_opinion_modifier = {
									who = ROOT
									modifier = scornfully_insulted
								}
							}
						}
						OR = {
							is_rival = ROOT
							is_enemy = ROOT
						}
					}
					exists = no
				}
				
			}
		}
		
		effect = {
			335 = {
				add_permanent_claim = ROOT
			}
			add_casus_belli = {
				target = AF1
				type = cb_vassalize_mission
				months = 9125
			}
		}
	}
	ald_old_grudge = {
		icon = mission_impaled_soldies
		required_missions = {ald_rival }
		position = 2
		provinces_to_highlight = {
			province_id = 335
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = { 
			335 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			western_morocco_area = {
				add_permanent_claim = ROOT
			}
			marrekesh_area = {
				add_permanent_claim = ROOT
			}
			northern_morocco_area = {
				add_permanent_claim = ROOT
			}
			custom_tooltip = " "
			add_prestige_or_monarch_power = {
				amount = 25
			}
			custom_tooltip = " "
			if = {
				limit = {
					AF1 = {
						is_subject_of = ROOT
					}
				}
				custom_tooltip = if_af1_subject_yes
			}
			else = {
				custom_tooltip = if_af1_subject_no
			}
			tooltip = {
				365 = {
					cede_province = ROOT
					add_core = ROOT
					add_base_manpower = 3
				}
			}
			hidden_effect = {
				if = {
					limit = {
						AF1 = {
							is_subject_of = ROOT
						}
					}
					365 = {
						cede_province = ROOT
						add_core = ROOT
						add_base_manpower = 3
					}
				}
			}
		}
	}
	ald_new_grudge = {
		icon = mission_moroccan_ports
		required_missions = {ald_old_grudge }
		position = 3
		provinces_to_highlight = {
			area = northern_morocco_area
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = { 
			northern_morocco_area = {
				type = all
				owned_by = ROOT
			}
		}
		
		effect = {
			upper_andalucia_area = {
				add_permanent_claim = ROOT
			}
			lower_andalucia_area = {
				add_permanent_claim = ROOT
			}
			custom_tooltip = " "
			1751 = {
				add_province_modifier = {
					name = alb_atlantic_gate
					duration = -1
				}
			}
			if = {
				limit = {
					AF1 = {
						is_subject_of = ROOT
					}
				}
				custom_tooltip = if_af1_subject_yes
			}
			else = {
				custom_tooltip = if_af1_subject_no
			}
			tooltip = {
				northern_morocco_area = {
					add_core = AF1
					cede_province = AF1
				}
				AF1 = {
					add_liberty_desire = -25
				}
			}
			hidden_effect = {
				if = {
					limit = {
						AF1 = {
							is_subject_of = ROOT
						}
					}
					northern_morocco_area = {
						add_core = AF1
						cede_province = AF1
					}
					AF1 = {
						add_liberty_desire = -25
					}
				}
			}
		}
	}
	ald_hispania = {
		icon = hispaniae
		required_missions = {ald_new_grudge }
		position = 5
		provinces_to_highlight = {
			OR = {
				area = upper_andalucia_area
			}
			
		}
		trigger = { 
			upper_andalucia_area = {
				type = all
				owned_by = ROOT
			}
		}
		
		effect = {
			lower_andalucia_area = {
				add_permanent_claim = ROOT
			}
			toledo_area = {
				add_permanent_claim = ROOT
			}
			valencia_area = {
				add_permanent_claim = ROOT
			}
			baleares_area = {
				add_permanent_claim = ROOT
			}
			add_country_modifier = {
				name = alb_sea_worthy_fleet
				duration = 12775
			}
			custom_tooltip = spawn_voc_men_tt
			hidden_effect = {
				226 = {
					voc_indiamen_light = ROOT
					voc_indiamen_light = ROOT
					voc_indiamen_light = ROOT
					voc_indiamen_light = ROOT
					voc_indiamen_light = ROOT
				}
			}
		}
	}
}
Aldabba_4_slot = {
	slot = 4
	generic = no
	ai = yes
	potential = {tag = AF2}
	has_country_shield = yes

	ald_mauria = {
		icon = mission_control_surat
		required_missions = {ald_old_grudge }
		position = 3
		provinces_to_highlight = {
			OR = {
				area = western_morocco_area
				area = marrekesh_area
			}
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = { 
			western_morocco_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			marrekesh_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			if = {
				limit = {
					AF1 = {
						is_subject_of = ROOT
					}
				}
				AF1 = {
					NOT = {
						liberty_desire = 50
					}
				}
			}
		}
		
		effect = {
			southern_morocco_area = {
				add_permanent_claim = ROOT
			}
			tafilalt_area = {
				add_permanent_claim = ROOT
			}
			sus_area = {
				add_permanent_claim = ROOT
			}
			custom_tooltip = " "
			343 = {
				add_province_modifier = {
					name = alb_fez_secured
					duration = -1
				}
			}
			custom_tooltip = " "
			if = {
				limit = {
					AF1 = {
						is_subject_of = ROOT
					}
				}
				custom_tooltip = if_af1_subject_yes
			}
			else = {
				custom_tooltip = if_af1_subject_no
			}
			tooltip = {
				add_country_modifier = {
					name = alb_annexation_of_mauria
					duration = 5475
				}
			}
			hidden_effect = {
				if = {
					limit = {
						AF1 = {
							is_subject_of = ROOT
						}
					}
					add_country_modifier = {
						name = alb_annexation_of_mauria
						duration = 5475
					}
				}
			}
		}
	}
	ald_mauria_def = {
		icon = mission_conquer_mauria_det
		required_missions = {ald_mauria }
		position = 4
		provinces_to_highlight = {
			OR = {
				is_capital_of = AF1
				area = sus_area
				area = tafilalt_area
				area = southern_morocco_area
			}
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = { 
			AF1 = {
				exists = no
			}
			sus_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			tafilalt_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			southern_morocco_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			macaronesia_area = {
				add_permanent_claim = ROOT
			}
			custom_tooltip = " "
			add_accepted_culture_or_dip_power = {
				culture = maurian
			}
			if = {
				limit = {
					has_country_modifier = annexers_legacy
				}
				custom_tooltip = hun_annexed_subject_tt_yes
			}
			else = {
				custom_tooltip = hun_annexed_subject_tt_no
			}
			hidden_effect = {
				if = {
					limit = {
						has_country_modifier = annexers_legacy
					}
					remove_country_modifier = annexers_legacy
				}
			}
		}
	}
	ald_tus_returned = {
		icon = mission_conquer_tunis
		required_missions = {ald_kab }
		position = 6
		provinces_to_highlight = {
			OR = {
				is_capital_of = CR1
				is_capital_of = CR0
			}
		}
		trigger = { 
			OR = {
				CR0 = {
					exists = no
				}
				CR1 = {
					exists = no
				}
			}		
			tunisia_area = {
				type = all
				owned_by = ROOT
			}
		}
		
		effect = {
			add_country_modifier = {
				name = tunis_navy
				duration = -1
			}
		}
	}
}

Aldabba_5_slot = {
	slot = 5
	generic = no
	ai = yes
	potential = {tag = AF2}
	has_country_shield = yes

	ald_fort = {
		icon = mission_tear_down_spanish_strongholds
		required_missions = { }
		position = 1
		
		trigger = { 
			has_mil_advisor = yes
			army_size_percentage = 1
			has_government_power = {
				mechanic_type = aldabba_failure_mechanic
				power_type = restoration_aldabba
				value = 10
			}
		}
		
		effect = {
			add_mil_power = 50
			add_country_modifier = {
				name = fort_renovation
				duration = 10950
			}
		}
	}
	
	ald_power = {
		icon = mission_conquer_tunisia
		required_missions = { ald_fort }
		position = 3
		provinces_to_highlight = {
			province_id = 350
			NOT = {
				owned_by = ROOT
			}
		}
		trigger = { 
			350 = {
				owned_by = ROOT
			}
		}
		
		effect = {
			ouled_nail_area = {
				add_permanent_claim = ROOT
			}
			north_saharan_area = {
				add_permanent_claim = ROOT
			}
			kabylia_area = {
				add_permanent_claim = ROOT
			}
			custom_tooltip = " "
			350 = {
				add_or_upgrade_fort_building = yes
				add_province_modifier = {
					name = alb_defensive_position
					duration = -1
				}
				
			}
		}
	}
	ald_kab = {
		icon = mission_fatimid_caliphate
		required_missions = { ald_power}
		position = 5
		provinces_to_highlight = {
			OR = {
				area = ouled_nail_area
				area = north_saharan_area
				area = kabylia_area
			}
			
		}
		trigger = { 
			ouled_nail_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			north_saharan_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			kabylia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			djerba_area = {
				add_permanent_claim = ROOT
			}
			tripolitania_area = {
				add_permanent_claim = ROOT
			}
			tunisia_area = {
				add_permanent_claim = ROOT
			}
			custom_tooltip = " "
			add_ruler_modifier = {
				name = alb_unifier_of_the_east
				duration = -1
			}
			custom_tooltip = " "
			custom_tooltip = for_next_20_years
			hidden_effect = {
				add_country_modifier = {
					name = alb_hidden_effect_mod
					hidden = yes
					duration = 7300
				}
			}
		}
	}
	ald_trip = {
		icon = mission_pacify_the_berbers
		required_missions = { ald_kab }
		position = 6
		provinces_to_highlight = {
			OR = {
				area = tripolitania_area
				area = djerba_area
			}
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = { 
			djerba_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			tripolitania_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			356 = {
				add_permanent_claim = ROOT
			}
			fezzan_area = {
				add_permanent_claim = ROOT
			}
			custom_tooltip = " "
			353 = {
				add_or_upgrade_trade_building = yes
				if = {
					limit = {
						NOT = {
							province_has_center_of_trade_of_level = 3
						}
					}
					add_center_of_trade_level = 1
				}
				else = {
					add_base_production = 3
				}
			}
			custom_tooltip = dip_advisors_now_give_african_lateens
			hidden_effect = {
				set_country_flag = african_lateen_dip_advisors
			}
		}
	}
	ald_desert = {
		icon = mission_traverse_the_sahara
		required_missions = { ald_trip }
		position = 7
		provinces_to_highlight = {
			OR = {
				province_id = 356	
				area = fezzan_area
			}
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = { 
			356 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			fezzan_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_country_modifier = {
				name = muslim_versus
				duration = 10950
			}
			egypt_region = {
				add_permanent_claim = ROOT
			}
		}
	}
}