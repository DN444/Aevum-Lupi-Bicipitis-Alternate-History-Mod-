namespace = papacy

country_event = { #Investiture good pope do their job
	id = papacy.1
	title = papacy.1.t
	desc = papacy.1.d
	picture = POPE_PREACHING_eventPicture
	
	trigger = {
		tag = PAP
		emperor = {
			NOT = {
				has_ruler_modifier = pope_likes_emperor
			}
			NOT = {
				has_ruler_modifier = pope_dislikes_emperor
			}
		}
	}

	mean_time_to_happen = {
		months = 2
	}

	option = {
		name = papacy.1a
		ai_chance = {
			factor = 90
			modifier = {
				factor = 0.5
				ruler_has_personality = sinner_personality
			}
			modifier = {
				factor = 5
				emperor = {
					is_papal_controller = yes
				}
			}
		}
		emperor = {
			add_ruler_modifier = {
				name = pope_likes_emperor
			}
		}
		add_5_p_a = yes
		sinful_emperor_endorsed = yes
		faithful_emperor_endorsed = yes	
	}
	option = {
		name = papacy.1b
		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				ruler_has_personality = cruel_personality
			}
		}
		emperor = {
			add_ruler_modifier = {
				name = pope_dislikes_emperor
			}
			country_event = {
				id = papacy.2
				days = 7
			}
		}
		sinful_emperor_denied = yes
		faithful_emperor_denied = yes
	}
}


country_event = { #Investiture Emperor mad
	id = papacy.2
	title = papacy.2.t
	desc = papacy.2.d
	picture = POPE_PREACHING_eventPicture
	
	is_triggered_only = yes

	option = {
		name = papacy.2a
		add_treasury = -100
		PAP = {
			country_event = {
				id = papacy.4
			}
		}
	}
	option = {
		name = papacy.2b
		highlight = yes
		trigger = {
			papal_influence = 50
		}
		add_papal_influence = -50
		PAP = {
			add_papal_influence = 50
		}
		remove_country_modifier = pope_dislikes_emperor
		add_ruler_modifier = {
			name = pope_likes_emperor
		}
	}
	option = {
		name = papacy.2c
		highlight = yes
		trigger = {
			is_papal_controller = yes
		}
		remove_country_modifier = pope_dislikes_emperor
		add_ruler_modifier = {
			name = pope_likes_emperor
		}
	}
}

country_event = { #promote celibacy among the clergy
	id = papacy.3
	title = papacy.3.t
	desc = papacy.3.d
	picture = POPE_PREACHING_eventPicture
	
	is_triggered_only = yes

	option = {
		name = papacy.3a
		add_5_p_a = yes
	}
	option = {
		name = papacy.3b
		add_curia_treasury = 1000
	}
}

country_event = { #reasonable response
	id = papacy.4
	title = papacy.4.t
	desc = papacy.4.d
	picture = POPE_PREACHING_eventPicture
	
	is_triggered_only = yes

	option = {
		name = papacy.4a
		add_treasury = 100
		emperor = {
			remove_country_modifier = pope_dislikes_emperor
			add_ruler_modifier = {
				name = pope_likes_emperor
			}
		}
	}
	option = {
		name = papacy.4b
		emperor = {
			remove_country_modifier = pope_dislikes_emperor
			add_ruler_modifier = {
				name = pope_likes_emperor
			}
		}
	}
	option = {
		name = papacy.4b
		excommunicate = emperor
		custom_tooltip = PAP_WAR_IN_EARTH
	}
}

country_event = { #HMM what are you doing step Pope?
	id = papacy.5
	title = papacy.5.t
	desc = papacy.5.d
	picture = POPE_PREACHING_eventPicture
	
	trigger = {
		has_government_mechanic = saints_and_sinners
		emperor = {
			has_country_modifier = pope_dislikes_emperor
			is_excommunicated = yes
		}
		OR = {
			has_government_power = {
				mechanic_type = saints_and_sinners
				power_type = nice_or_naughty
				value = 50
			}
			NOT = {
				has_government_power = {
					mechanic_type = saints_and_sinners
					power_type = nice_or_naughty
					value = -50
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 24
	}

	option = {
		name = papacy.5a
		trigger = {
			has_government_power = {
				mechanic_type = saints_and_sinners
				power_type = nice_or_naughty
				value = 50
			}
		}
		change_tag = PA0
		change_religion = pontifex
		custom_tooltip = PAP_WAR_IN_EARTH_2
		hidden_effect = {
			every_owned_province = {
				limit = {
					religion = catholic
				}
				change_religion = pontifex
			}
			every_subject_country = {
				limit = {
					religion = catholic
				}
				change_religion = pontifex
				every_owned_province = {
					limit = {
						religion = catholic
					}
					change_religion = pontifex
				}
			}
			every_known_country = {
				limit = {
					has_opinion = {
						who = ROOT
						value = 130
					}
				}
				change_religion = pontifex
				every_owned_province = {
					limit = {
						religion = catholic
					}
					change_religion = pontifex
				}
			}
		}
	}
	option = {
		name = papacy.5b
		trigger = {
			NOT = {
				has_government_power = {
					mechanic_type = saints_and_sinners
					power_type = nice_or_naughty
					value = -50
				}
			}
		}
		change_tag = PA0
		change_religion = pontifex
		custom_tooltip = PAP_WAR_IN_EARTH_3
		hidden_effect = {
			every_owned_province = {
				limit = {
					religion = catholic
				}
				change_religion = pontifex
			}
			every_subject_country = {
				limit = {
					religion = catholic
				}
				change_religion = pontifex
				every_owned_province = {
					limit = {
						religion = catholic
					}
					change_religion = pontifex
				}
			}
			every_known_country = {
				limit = {
					has_opinion = {
						who = ROOT
						value = 180
					}
				}
				change_religion = pontifex
				every_owned_province = {
					limit = {
						religion = catholic
					}
					change_religion = pontifex
				}
			}
		}
	}
}