namespace = carto

country_event = {
	id = carto.1
	title = carto.1.test
	desc = carto.1.desc
	picture = GREAT_FIRE_eventPicture
	
	fire_only_once = yes
	trigger = {
		is_year = 1445
		owns = 341
	}
	mean_time_to_happen = {
		months = 1
	}
	option = {
		name = carto.1a
		ai_chance = {
			factor = 34
		}
		341 = {
			add_devastation = 25
			add_base_manpower = -1
			add_base_production = -2
			add_base_tax = -1
		}
		add_treasury = -50
		random_owned_province = {
			limit = {
				religion = indictian
			}
			add_unrest = 5
		}
		country_event = {
			id = carto.2
			days = 30
		}
	}
}
country_event = {
	id = carto.2
	title = carto.2.test
	desc = carto.2.desc
	picture = ANGRY_MOB_eventPicture
	
	is_triggered_only = yes

	option = {
		name = carto.2a
		ai_chance = {
			factor = 50
		}
		every_owned_province = {
			limit = {
				religion = indictian
			}
			add_unrest = 10
		}
		country_event = {
			id = carto.3
			days = 30
		}
		custom_tooltip = empty_line_tt
		custom_tooltip = stay_tunisia_tt
	}
	option = {
		name = carto.2b
		ai_chance = {
			factor = 50
		}
		every_owned_province = {
			limit = {
				religion = indictian
			}
			add_unrest = -5
		}
		country_event = {
			id = carto.4
			days = 30
		}
		country_event = {
			id = carto.5
			days = 30
		}
		custom_tooltip = empty_line_tt
		custom_tooltip = become_carthage_tt
	}
}

country_event = {
	id = carto.3
	title = carto.3.test
	desc = carto.3.desc
	picture = ANGRY_MOB_eventPicture
	
	is_triggered_only = yes

	option = {
		name = carto.3a
		341 = {
			add_base_manpower = -1
		}
		every_owned_province = {
			limit = {
				religion = indictian
			}
			add_base_manpower = -1
			change_religion = ROOT
		}
		set_country_flag = had_tunis_great_fire_flag
		swap_non_generic_missions = yes
	}
	option = {
		name = carto.3b
		ai_chance = {
			factor = 50
		}
		add_stability = 1
		add_legitimacy = -50
		set_country_flag = had_tunis_great_fire_flag
		swap_non_generic_missions = yes
	}
}

country_event = {
	id = carto.4
	title = carto.4.test
	desc = carto.4.desc
	picture = ANGRY_MOB_eventPicture
	
	is_triggered_only = yes

	option = {
		name = carto.4a
		change_tag = CR0
		set_in_empire = no
		emperor = {
			country_event = { id = hre_event.5 }
		}
		change_religion = indictian
		change_primary_culture = carthaginian
		hidden_effect = {
			every_province = {
				limit = {
					culture = cartaroma
				}
				change_culture = carthaginian
			}
		}
		country_event = { id = ideagroups.1 } #Swap Ideas
		capital_scope = {
			spawn_rebels = {
				size = 3
				type = noble_rebels
			}
		}
	}
}

country_event = {
	id = carto.5
	title = carto.5.test
	desc = carto.5.desc
	picture = ANGRY_MOB_eventPicture
	
	is_triggered_only = yes

	option = {
		name = carto.5a
		change_government = republic
		add_government_reform = newcarthage_republic
		kill_ruler = yes
		kill_heir = { allow_new_heir = no }		
		add_stability = -1
		set_country_flag = had_tunis_great_fire_flag
		swap_non_generic_missions = yes

	}
}

country_event = {
	id = carto.6
	title = carto.6.test
	desc = carto.6.desc
	picture = ANGRY_MOB_eventPicture

	fire_only_once = yes
	trigger = {
		118 = {
			OR = {
				controlled_by = ROOT
				owned_by = ROOT
			}
		}
		OR = {
			has_country_flag = had_tunis_great_fire_flag
			has_country_flag = had_tunis_great_fire_flag
		}
		always = no #placeholder for now
	}
	mean_time_to_happen = {
		months = 1
	}
	option = {
		name = carto.6a
		trigger = {
			tag = CR1
		}
		341 = {
			add_base_tax = 3
			add_base_production = 3
			add_base_manpower = 3
		}
		118 = {
			add_devastation = 30
			add_base_tax = -3
			add_base_production = -3
			add_base_manpower = -3
		}
	}

	option = {
		name = carto.6b
		trigger = {
			tag = CR0
		}
		341 = {
			add_base_tax = 4
			add_base_production = 4
			add_base_manpower = 4
		}
		118 = {
			add_devastation = 80
			add_base_tax = -5
			add_base_production = -5
			add_base_manpower = -5
		}
		every_country = {
			limit = {
				OR = {
					culture_group = latin
					tag = SO0
					tag = RU0
					tag = AE0
					tag = SP0
					tag = BR0
				}
			}
			reverse_add_aggressive_expansion = {
				who = ROOT
				value = 20
				apply_calc = no
			}
		}
	}
	option = {
		name = carto.6c
		341 = {
			add_base_tax = 1
			add_base_production = 1
			add_base_manpower = 1
		}
		118 = {
			add_base_tax = -1
			add_base_production = -1
			add_base_manpower = -1
		}
	}
}

country_event = {
	id = carto.7
	title = carto.7.test
	desc = carto.7.desc
	picture = ANGRY_MOB_eventPicture

	is_triggered_only = yes

	option = {
		name = carto.7a
		if = {
			limit = {
				exists = CR0
			}
			CR0 = {
				vassalize = ROOT
			}
		}
		else = {
			CR1 = {
				vassalize = ROOT
			}
		}
		ai_chance = {
			factor = 30
			modifier = {
				factor = 1.1
				OR = {
					has_opinion = {
						who = CR1
						value = 110
					}
					has_opinion = {
						who = CR0
						value = 110
					}
				}
			}
			modifier = {
				factor = 1.5
				OR = {
					has_opinion = {
						who = CR1
						value = 150
					}
					has_opinion = {
						who = CR0
						value = 150
					}
				}
			}
			modifier = {
				factor = 2
				OR = {
					has_opinion = {
						who = CR1
						value = 180
					}
					has_opinion = {
						who = CR0
						value = 180
					}
				}
			}
		}
	}
	option = {
		name = carto.7b
		ai_chance = {
			factor = 70
		}
		CR0 = {
			add_casus_belli = {
				type = cb_vassalize_mission
				target = ROOT
				months = 3650
			}
		}
	}
}